"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[365],{4630:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"How it works/Annotation","title":"Annotation","description":"Annotation","source":"@site/docs/3 - How it works/Annotation.md","sourceDirName":"3 - How it works","slug":"/How it works/Annotation","permalink":"/doc-devlens/How it works/Annotation","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Abstract Syntax Tree","permalink":"/doc-devlens/How it works/Abstract Syntax Tree"},"next":{"title":"Basic pack","permalink":"/doc-devlens/Annotators/Basic pack"}}');var s=n(4848),a=n(8453);const i={},r=void 0,c={},l=[{value:"Annotation",id:"annotation",level:2}];function d(t){const e={code:"code",em:"em",h2:"h2",img:"img",p:"p",pre:"pre",...(0,a.R)(),...t.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h2,{id:"annotation",children:"Annotation"}),"\n",(0,s.jsx)(e.p,{children:"The next step is to \"catch\" the node you want. Binaries in the release come with an 'annotators/' folder already filled with some examples."}),"\n",(0,s.jsx)(e.p,{children:"Here is an example of the Annotator that will store every import of your project:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'class PythonImportAnnotator(AbstractAnnotator):\n    """\n    PythonImportAnnotator is an annotator class that identifies import statements in Python code.\n    """\n    def parse(self, ast: ParserRuleContext):\n        importStmts = findAll(ast, "Import_stmt")\n        importNames = findAll(importStmts, "Import_name")\n        names = findAll(importNames, "Dotted_name")\n\n        for match in names:\n            yield Annotation(name="Import", value=self.getText(match), context=match)\n'})}),"\n",(0,s.jsxs)(e.p,{children:["What interests us in this example is mostly the use of the ",(0,s.jsx)(e.code,{children:"findAll()"})," method. This method will create a list of every node you want in the AST."]}),"\n",(0,s.jsxs)(e.p,{children:["You just have to use the ",(0,s.jsx)(e.code,{children:"findAll()"})," on each node you want to filter until you get the value of the node."]}),"\n",(0,s.jsxs)(e.p,{children:["Here is the ",(0,s.jsx)(e.em,{children:"AST"})," that represent an import:"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-txt",children:"File_input\n    \u2514\u2500\u2500 Statements\n        \u2514\u2500\u2500 Statement\n            \u2514\u2500\u2500 Simple_stmts\n                \u2514\u2500\u2500 Simple_stmt\n                    \u2514\u2500\u2500 Import_stmt\n                        \u2514\u2500\u2500 Import_name\n                            \u2514\u2500\u2500 'import'\n                            \u2514\u2500\u2500 Dotted_as_names\n                                \u2514\u2500\u2500 Dotted_as_name\n                                    \u2514\u2500\u2500 Dotted_name\n                                        \u2514\u2500\u2500 'dataiku'\n                \u2514\u2500\u2500 '\n"})}),"\n",(0,s.jsxs)(e.p,{children:["In the annotator we get every ",(0,s.jsx)(e.code,{children:"Dotted_name"})," nested in every ",(0,s.jsx)(e.code,{children:"Import_name"})," nested in every ",(0,s.jsx)(e.code,{children:"Import_stmt"}),". Filtering this way make the annotator as much precise as possible, so it will not get another unrelated node."]}),"\n",(0,s.jsxs)(e.p,{children:["The last part is to create an Annotation for each match you have. You can choose to not store a value in the Annotation by passing ",(0,s.jsx)(e.code,{children:"None"})," to the annotation."]}),"\n",(0,s.jsxs)(e.p,{children:["Executing a ",(0,s.jsx)(e.code,{children:"check"})," will result in the creation of Annotations and the filling of the database."]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"SQLite Annotation",src:n(5619).A+"",title:"SQLite Annotation",width:"1268",height:"683"})})]})}function h(t={}){const{wrapper:e}={...(0,a.R)(),...t.components};return e?(0,s.jsx)(e,{...t,children:(0,s.jsx)(d,{...t})}):d(t)}},5619:(t,e,n)=>{n.d(e,{A:()=>o});const o=n.p+"assets/images/db-912e315177e009b939fd4ff00debc149.png"},8453:(t,e,n)=>{n.d(e,{R:()=>i,x:()=>r});var o=n(6540);const s={},a=o.createContext(s);function i(t){const e=o.useContext(a);return o.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function r(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(s):t.components||s:i(t.components),o.createElement(a.Provider,{value:e},t.children)}}}]);